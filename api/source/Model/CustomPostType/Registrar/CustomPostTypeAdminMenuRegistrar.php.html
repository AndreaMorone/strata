<html>
    <head>
        <script
            type="text/javascript"
            src="../../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php
namespace Strata\Model\CustomPostType\Registrar;

use Strata\Router\Router;
use Strata\Controller\Controller;
use Strata\Model\CustomPostType\Registrar\Registrar;
use Strata\Core\StrataConfigurableTrait;

class CustomPostTypeAdminMenuRegistrar extends Registrar
{
    use StrataConfigurableTrait;

    public function register()
    {
        if (count($this-&gt;getConfiguration())) {
            add_action('admin_menu', array($this, 'action_addAdminMenus'));
        }
    }

    public function action_addAdminMenus()
    {
        // Default to the model's likely controller.
        $defaultController = Controller::generateClassName($this-&gt;entity-&gt;getShortName());
        $parentSlug = 'edit.php?post_type=' . $this-&gt;entity-&gt;getWordpressKey();

        foreach ($this-&gt;getConfiguration() as $func =&gt; $config) {
            $config += array(
                'title'         =&gt; ucfirst($func),
                'menu-title'    =&gt; ucfirst($func),
                'capability'    =&gt; &quot;manage_options&quot;,
                'icon'          =&gt; null,
                'route'         =&gt; array($defaultController, $func),
                'position'      =&gt; null,
            );

            // This is to circumvent that wordpress doesn't let you pass arguments to
            // callbacks so we can send the controller and function to the router.
            // We dont want people to have to specify that odd function name.
            // Allow them to send the controller string name and take care of the rest.
            if (is_string($config['route'])) {
                $route = Router::callback($config['route'], $func);
            }  else {
                $route = Router::callback($config['route'][0], $config['route'][1]);
            }

            $uniquePage = $this-&gt;entity-&gt;getWordpressKey() . &quot;_&quot; . $func;
            add_submenu_page($parentSlug, $config['title'], $config['menu-title'], $config['capability'], $uniquePage, $route, $config['icon'], $config['position']);
        }
    }
}
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>